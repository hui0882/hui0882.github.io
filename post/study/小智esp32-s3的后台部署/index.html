<!doctype html><html lang=zh-cn data-theme-mode=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>小智ESP32的后台程序本地化部署 | 玛卡巴卡
</title><meta name=description content="本款小智的硬件是基于[虾哥开源](https://github.com/78/xiaozhi-esp32)的项目进行,在硬件和代码部分没有做过多的改动,都是基于源码,只是把小智的连接的后端服务器地址改成了自己的后台,这个部分也是用的[开源的后端工程](https://github.com/xinnan-tech/xiaozhi-esp32-server)
本教程**默认已安装git,conda**"><script>window.siteConfig=JSON.parse('{"anchor_icon":null,"clipboard":{"copyright":{"content":"本文版权：本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！","count":50,"enable":false},"fail":"复制失败 (ﾟ⊿ﾟ)ﾂ","success":"复制成功(*^▽^*)"},"code_block":{"expand":true},"icon_font":"4552607_0khxww3tj3q9","outdate":{"daysago":180,"enable":false,"message":"本文最后更新于 {time}，请注意文中内容可能已经发生变化。"}}')</script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7cNoto%20Serif%20SC:400,400italic,700,700italic%7c&amp;display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7cNoto%20Serif%20SC:400,400italic,700,700italic%7c&amp;display=swap" media=print onload='this.media="all"'><link rel=preload href=//at.alicdn.com/t/c/font_4552607_0khxww3tj3q9.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=stylesheet href=/css/loader.min.2ad0e9bbffb534e893c0ecefc44787a277cf851387e8ad9dccfbc3a5f0886dbe.css><meta property="og:type" content="website"><meta property="og:title" content="小智ESP32的后台程序本地化部署 | 玛卡巴卡"><meta property="og:description" content="本款小智的硬件是基于[虾哥开源](https://github.com/78/xiaozhi-esp32)的项目进行,在硬件和代码部分没有做过多的改动,都是基于源码,只是把小智的连接的后端服务器地址改成了自己的后台,这个部分也是用的[开源的后端工程](https://github.com/xinnan-tech/xiaozhi-esp32-server)
本教程**默认已安装git,conda**"><meta property="og:url" content="https://hui0882.github.io/post/study/%E5%B0%8F%E6%99%BAesp32-s3%E7%9A%84%E5%90%8E%E5%8F%B0%E9%83%A8%E7%BD%B2/"><meta property="og:site_name" content="天色初晴"><meta property="og:image" content="/"><meta property="article:author" content="玛卡巴卡"><meta property="article:published_time" content="2025-03-26T13:21:00+08:00"><meta property="article:modified_time" content="2025-03-26T13:21:00+08:00"><meta property="article:tag" content="嵌入式兴趣爱好"><meta name=twitter:card content="summary"><meta name=twitter:image content="/"><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/main.min.9a3ab578dc4ed828bd3e6334f418335d50a753dd06dcd98ba41c81a8d5b34adf.css><link rel=preload as=style href=https://npm.webcache.cn/photoswipe@5.4.4/dist/photoswipe.css onload='this.onload=null,this.rel="stylesheet"'><link rel=preload as=style href=https://npm.webcache.cn/katex@0.16.9/dist/katex.min.css onload='this.onload=null,this.rel="stylesheet"'><script src=https://npm.webcache.cn/pace-js@1.2.4/pace.min.js integrity=sha384-k6YtvFUEIuEFBdrLKJ3YAUbBki333tj1CSUisai5Cswsg9wcLNaPzsTHDswp4Az8 crossorigin=anonymous></script><link rel=stylesheet href=https://npm.webcache.cn/@reimujs/aos@0.1.0/dist/aos.css></head><body><div id=loader><div class="loading-left-bg loading-bg"></div><div class="loading-right-bg loading-bg"></div><div class=spinner-box><div class=loading-taichi><svg width="150" height="150" viewBox="0 0 1024 1024" class="icon" shape-rendering="geometricPrecision"><path d="M303.5 432a80 80 0 01-12 160 80 80 0 0112-160z" fill="var(--red-1, #ff5252)"/><path d="M512 65a447 447 0 010 894V929a417 417 0 000-834 417 417 0 000 834v30a447 447 0 010-894zm0 30A417 417 0 01929 512 208.5 208.5.0 01720.5 720.5V592a80 80 0 000-160 80 80 0 000 160V720.5A208.5 208.5.0 01512 512 208.5 208.5.0 00303.5 303.5 208.5 208.5.0 0095 512 417 417 0 01512 95z" fill="var(--red-1, #ff5252)"/></svg></div><div class=loading-word>稍安勿躁</div></div></div></div><script>var time=null,startLoading=()=>{time=Date.now(),document.getElementById("loader").classList.remove("loading")},endLoading=()=>{time?Date.now()-time>500?(time=null,document.body.style.overflow="auto",document.getElementById("loader").classList.add("loading")):(setTimeout(endLoading,500-(Date.now()-time)),time=null):(document.body.style.overflow="auto",document.getElementById("loader").classList.add("loading"))};window.addEventListener("DOMContentLoaded",endLoading),document.getElementById("loader").addEventListener("click",endLoading)</script><div id=copy-tooltip style="pointer-events:none;opacity:0;transition:all .2s ease;position:fixed;top:50%;left:50%;z-index:999;transform:translate(-50%,-50%);color:#fff;background:rgba(0,0,0,.5);padding:10px 15px;border-radius:10px"></div><div id=container><div id=wrap><div id=header-nav><nav id=main-nav><span class=main-nav-link-wrap><div class='main-nav-icon icon rotate'>&#xe62b;</div><a class=main-nav-link href=/>首页</a>
</span><span class=main-nav-link-wrap><div class='main-nav-icon icon rotate'>&#xe62b;</div><a class=main-nav-link href=/archives>归档</a>
</span><span class=main-nav-link-wrap><div class='main-nav-icon icon rotate'>&#xe62b;</div><a class=main-nav-link href=/about>关于</a>
</span><span class=main-nav-link-wrap><div class='main-nav-icon icon rotate'>&#xe62b;</div><a class=main-nav-link href=/friend>友链</a>
</span><a id=main-nav-toggle class=nav-icon></a></nav><nav id=sub-nav></nav></div><header id=header><picture></picture><img fetchpriority=high src=/images/background.webp alt=小智ESP32的后台程序本地化部署><div id=header-outer><div id=header-title><a href=/ id=logo><h1 data-aos=slide-up>小智ESP32的后台程序本地化部署</h1></a><h2 id=subtitle-wrap data-aos=slide-down></h2></div></div></header><div id=content class=sidebar-right><aside id=sidebar><div class="sidebar-wrapper wrap-sticky"><div class=sidebar-wrap data-aos=fade-up><div class=sidebar-toc-sidebar><div class=sidebar-toc><h3 class=toc-title>文章目录</h3><div class="sidebar-toc-wrapper toc-div-class"><nav id=TableOfContents><ul><li><a href=#开始准备>开始准备</a></li><li><a href=#开始开发>开始开发</a><ul><li></li></ul></li><li><a href=#服务器部署>服务器部署</a></li><li><a href=#后话>后话</a></li></ul></nav></div></div></div><div class="sidebar-common-sidebar hidden"><div class=sidebar-author><img data-src=/avatar/head.jpg data-sizes=auto alt=玛卡巴卡 class=lazyload><div class=sidebar-author-name>玛卡巴卡</div><div class=sidebar-description>早饭中饭晚饭吃什么</div></div><div class=sidebar-state><div class=sidebar-state-article><div>文章</div><div class=sidebar-state-number>3</div></div><div class=sidebar-state-category><div>分类</div><div class=sidebar-state-number>0</div></div><div class=sidebar-state-tag><div>标签</div><div class=sidebar-state-number>4</div></div></div><div class=sidebar-social></div><div class=sidebar-menu><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/ aria-label=首页></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>首页</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/archives aria-label=归档></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>归档</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/about aria-label=关于></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>关于</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/friend aria-label=友链></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>友链</div></div></div></div><div class=sidebar-btn-wrapper style=position:static><div class="sidebar-toc-btn current"></div><div class=sidebar-common-btn></div></div></div></div><div class=sidebar-widget></div></aside><section id=main><article class="h-entry article" itemprop=blogPost itemscope itemtype=https://schema.org/BlogPosting><div class=article-inner data-aos=fade-up><div class=article-meta><div class=article-date><span class=article-date-link data-aos=zoom-in><time datetime="2025-03-26 13:21:00 +0800 +0800" itemprop=datePublished>2025-03-26</time>
<time style=display:none id=post-update-time>2025-03-26</time></span></div><div class=article-category></div></div><div class=hr-line></div><div class="e-content article-entry" itemprop=articleBody><h2 id=开始准备><a class=header-anchor href=#%e5%bc%80%e5%a7%8b%e5%87%86%e5%a4%87></a>开始准备</h2><ul><li>硬件: 一套兼容<code>xiaozhi-esp32</code> 的硬件设备,我这里用的是esp32-s3</li><li>有一台性能足够的电脑,用云服务器也可以,如果语音识别服务使用API的话,使用2核CPU,2G内存的服务器也可以</li></ul><h2 id=开始开发><a class=header-anchor href=#%e5%bc%80%e5%a7%8b%e5%bc%80%e5%8f%91></a>开始开发</h2><h4 id=开发步骤><a class=header-anchor href=#%e5%bc%80%e5%8f%91%e6%ad%a5%e9%aa%a4></a>开发步骤</h4><ol><li>首先在github上将小智服务端的代码全部下来</li><li>申请要使用的大模型API服务<ol><li>ASR语音识别</li><li>LLM大模型</li><li>TTS语音生成</li></ol></li><li>将自己的API key填写到配置信息中</li><li>运行自己的程序,进行初步测试</li><li>修改小智固件内的代码</li><li>部署小智后台到云服务器上(可选)</li></ol><h4 id=服务端配置与启动><a class=header-anchor href=#%e6%9c%8d%e5%8a%a1%e7%ab%af%e9%85%8d%e7%bd%ae%e4%b8%8e%e5%90%af%e5%8a%a8></a>服务端配置与启动</h4><ol><li><p>使用git克隆仓库到本地
<code>git clone https://github.com/xinnan-tech/xiaozhi-esp32-server.git</code> 在你想要放置这个代码的位置在任务的菜单栏输入cmd,打开cmd命令提示符
<img src=/images/cmd.png alt>
然后在打开的窗口中输入上面的命令,把仓库克隆到本地,我这是已经弄好了的</p></li><li><p>申请想要的API接口(推荐火山引擎的豆包)
如果要使用本地电脑进行语音识别的话,就不用申请ASR的API,但如果是部署到服务器上面用,并且配置还是最低的那个,最好还是申请一下,也能提升程序运行时候的性能
随后就是LLM模型,这个就是到时候进行思考的主要力量了,可以选择的种类也很多
这里我们要进行调用的有ASR,LLM,TTS这三个,都能在火山引擎中进行申请</p><p>下面也按照火山的API进行教程</p><ol><li>在浏览器中打开火山引擎的模型广场<code>https://console.volcengine.com/ark/region:ark+cn-beijing/model?vendor=Bytedance&amp;view=LIST_VIEW</code></li><li>申请大语言模型(LLM),流式语音识别(ARS),特别需要注意TTS要用<code>https://console.volcengine.com/speech/service/10007?AppID=4200677990</code> 下面的语音合成大模型<img src=/images/TTS.png alt>,一定不能选下面的语音合成,因为那个合成的语音是剪映中剪辑用的那种类型的音色,很机械,而且延迟很高,体验很差</li><li>申请好模型的API之后,就在方舟的控制台进行API的创建<code>https://console.volcengine.com/ark/region:ark+cn-beijing/apiKey?apikey=%7B%7D</code> 名称可以随便填,这个只要你能记住就行,我们要用的主要就是要那个API Key,这个是用来调用LLM的,把这个填在小智后台服务目录下的<code>main/xiaozhi-server/data/.config.yaml</code> 下面,这个文件本身是没有的,需要创建出对应的文件夹目录,然后把这个目录上面的config.yaml文件复制进data下面,然后重命名,前面加一个点</li><li>语音模型和LLM有区别,这个得在语音模型的板块中填写语音模型的APP ID和Access Token到配置文件的对应位置,并且在最前面的设置的位置填上你将要使用ARS,LLM,TTS的服务来源</li></ol></li><li><p>填好信息后就能对运行环境进行配置了</p><ol><li><p>先使用conda创建一个新的虚拟环境
<code>conda create -n xiaozhi python=3.10 -y</code>
<code>conda activate xiaozhi</code></p><p>添加清华源</p><p><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</code></p><p><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free</code></p><p><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge</code></p><p>下载相关的依赖包
<code>conda install libopus -y</code>
<code>conda install ffmpey -y</code></p></li><li><p>安装项目依赖
使用cd进入小智的目录
在进入<code>main/xiaozhi-server</code> 中
<code>cd main/xiaozhi-server</code></p><p><code>pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/</code></p><p><code>pip install -r requirements.txt</code></p></li></ol></li><li><p>运行项目
在xiaozhi-server的目录下面进行操作
<code>conda activate xiaozhi</code>
<code>python app.py</code></p></li><li><p>观察运行状态</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>25-02-23 12:01:09[core.websocket_server] - INFO - Server is running at ws://xxx.xx.xx.xx:8000
</span></span><span class=line><span class=cl>25-02-23 12:01:09[core.websocket_server] - INFO - =======上面的地址是websocket协议地址，请勿用浏览器访问=======
</span></span></code></pre></div><p>出现以上内容即为启动成功,可以使用内网穿透工具用手机设备进行测试,能否成功连接
显示的连接地址并不是实际上服务运行的地址,实际上只需要将本地的8000端口进行穿透就行
cpolar的命令为</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cpolar http 8000
</span></span></code></pre></div><p>观察输出的日志
<img src=/images/cpolar_teach.png alt>
如果如上图所示,在手机的模拟app中输入的连接地址就是
<code>ws:////27641a38.r24.cpolar.top</code>
如果会提示错误,可以自行排查问题,或者看看github的原文</p><h2 id=服务器部署><a class=header-anchor href=#%e6%9c%8d%e5%8a%a1%e5%99%a8%e9%83%a8%e7%bd%b2></a>服务器部署</h2><p>在阿里云上租台服务器<img src=/images/aliFWQ.png alt>
选台2核2G内存的就够用,但如果你是用的本地语音识别就另算,本文用的是火山的ASR API
创建的时候,选择Ubuntu系统,其他的就不用设置设么其他的了</p><p>启动服务器后,和本地部署方式是一样的</p><p>但相比都不会想自己在Linux这样的没有图形化界面上用vim填自己的配置信息什么的吧</p><p>就可以用文件上传功能,把我们本地的已经配置好了的内容进行上传,
<img src=/images/ssh.png alt>
进行部署,最后的启动也是一样的</p><p>我这里用的是ssh,并不是网站上自带的终端控制,但都大差不差</p><p>最后的启动方式也是一样的,进对应的界面,然后运行启动</p><p>进行连接测试的时候,连接地址就是服务器的公网ip地址,这个时候,如果你遇到了防火墙的问题,就在服务器的控制台和Ubuntu的设置中将8000端口开放<img src=/images/%E7%AB%AF%E5%8F%A3%E8%AE%BE%E7%BD%AE.png alt>
最好还是不要像我这样,开放这么多的端口,会比较危险</p><p>这样的话,就差不多已经完成了</p><h2 id=后话><a class=header-anchor href=#%e5%90%8e%e8%af%9d></a>后话</h2><p>当你能够成功连接之后,你觉得你应当怎么做,是觉得已经部署好了,就没事了对吗?</p><p>实际上,像我这样的ssh的连接方式,得用一个tmux的后台服务来保证服务不会被关掉</p><p>详细的操作方式就是使用tmux创建一个服务窗口,然后你把服务启动在这个窗口中,这样的还你的前台服务不管怎样都不会有什么问题,都不会影响到你的后台的服务</p><p>详细的操作方式就是</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># 创建后台窗口makabaka并进入
</span></span><span class=line><span class=cl>tmux new -s makabaka
</span></span></code></pre></div><p>在这个新打开的窗口中完成你的程序运行
然后退出的时候,就按住ctrl+b,然后再按d ,这样就是退出但不杀死后台</p><p>后面再重新进入makabaka的话就是</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>tmux a -t makabaka
</span></span></code></pre></div><p>好了,这次真的没有了,这个部署的过程我写的可能是比较的简陋,毕竟是第一次写个人博客,从来没什么经验,在项目中遇到的两个问题就是上面说到的TTS模型的选择导致的高延迟和这个服务器的部署,另外的话问题不是很大</p></div><footer class=article-footer><a data-aos=zoom-in href=https://hui0882.github.io/post/study/%E5%B0%8F%E6%99%BAesp32-s3%E7%9A%84%E5%90%8E%E5%8F%B0%E9%83%A8%E7%BD%B2/#comments class=article-comment-link><span class="post-comments-count valine-comment-count" data-xid=https//hui0882.github.io/post/study/%e5%b0%8f%e6%99%baesp32-s3%e7%9a%84%e5%90%8e%e5%8f%b0%e9%83%a8%e7%bd%b2/ itemprop=commentCount></span>
留言
</a><span data-aos=zoom-in id=/post/study/%E5%B0%8F%E6%99%BAesp32-s3%E7%9A%84%E5%90%8E%E5%8F%B0%E9%83%A8%E7%BD%B2/ class="leancloud_visitors article-visitor-link" data-flag-title=小智ESP32的后台程序本地化部署><span class=leancloud-visitors-count>0</span>
<em class=post-meta-item-text>阅读量</em></span><ul class=article-tag-list itemprop=keywords><li class=article-tag-list-item data-aos=zoom-in><a class=article-tag-list-link href=/tags/%e5%b5%8c%e5%85%a5%e5%bc%8f rel=tag>嵌入式</a></li><li class=article-tag-list-item data-aos=zoom-in><a class=article-tag-list-link href=/tags/%e5%85%b4%e8%b6%a3%e7%88%b1%e5%a5%bd rel=tag>兴趣爱好</a></li></ul></footer></div></article><section id=comments class=vcomment data-aos=fade-up></section></section></div><footer id=footer><div style=width:100%;overflow:hidden><div class=footer-line></div></div><div id=footer-info><div><span class=icon-copyright></span>
2024 -
2025
<span class="footer-info-sep rotate"></span>
玛卡巴卡</div><div>基于&nbsp;<a href=https://gohugo.io/ target=_blank>Hugo</a>&nbsp; Theme.<a href=https://github.com/D-Sketon/hugo-theme-reimu target=_blank>Reimu</a></div><div><span class=icon-brush>&nbsp;
3.2k
</span>&nbsp;|&nbsp;
<span class=icon-coffee>&nbsp;
00:08</span></div><div><span class=icon-eye></span>
<span id=busuanzi_container_site_pv>总访问量&nbsp;<span id=busuanzi_value_site_pv></span></span>
&nbsp;|&nbsp;
<span class=icon-user></span>
<span id=busuanzi_container_site_uv>总访客量&nbsp;<span id=busuanzi_value_site_uv></span></span></div></div></footer><div class=sidebar-top><div class="sidebar-top-taichi rotate"></div><div class=arrow-up></div></div><div id=mask class=hide></div></div><nav id=mobile-nav><div class=sidebar-wrap><div class=sidebar-toc-sidebar><div class=sidebar-toc><h3 class=toc-title>文章目录</h3><div class="sidebar-toc-wrapper toc-div-class"><nav id=TableOfContents><ul><li><a href=#开始准备>开始准备</a></li><li><a href=#开始开发>开始开发</a><ul><li></li></ul></li><li><a href=#服务器部署>服务器部署</a></li><li><a href=#后话>后话</a></li></ul></nav></div></div></div><div class="sidebar-common-sidebar hidden"><div class=sidebar-author><img data-src=/avatar/head.jpg data-sizes=auto alt=玛卡巴卡 class=lazyload><div class=sidebar-author-name>玛卡巴卡</div><div class=sidebar-description>早饭中饭晚饭吃什么</div></div><div class=sidebar-state><div class=sidebar-state-article><div>文章</div><div class=sidebar-state-number>3</div></div><div class=sidebar-state-category><div>分类</div><div class=sidebar-state-number>0</div></div><div class=sidebar-state-tag><div>标签</div><div class=sidebar-state-number>4</div></div></div><div class=sidebar-social></div><div class=sidebar-menu><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/ aria-label=首页></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>首页</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/archives aria-label=归档></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>归档</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/about aria-label=关于></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>关于</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/friend aria-label=友链></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>友链</div></div></div></div></div><div class=sidebar-btn-wrapper><div class="sidebar-toc-btn current"></div><div class=sidebar-common-btn></div></div></nav></div><script src=https://npm.webcache.cn/lazysizes@5.3.2/lazysizes.min.js integrity=sha384-3gT/vsepWkfz/ff7PpWNUeMzeWoH3cDhm/A8jM7ouoAK0/fP/9bcHHR5kHq2nf+e crossorigin=anonymous></script><script src=https://npm.webcache.cn/clipboard@2.0.11/dist/clipboard.min.js integrity=sha384-J08i8An/QeARD9ExYpvphB8BsyOj3Gh2TSh1aLINKO3L0cMSH2dN3E22zFoXEi0Q crossorigin=anonymous></script><script src=/js/main.js integrity crossorigin=anonymous></script><script src=/js/aos.js integrity crossorigin=anonymous></script><script>var aosInit=()=>{AOS.init({duration:1e3,easing:"ease",once:!0,offset:50})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",aosInit):aosInit()</script><script src=/js/pjax_main.js integrity crossorigin=anonymous data-pjax></script><script src=https://npm.webcache.cn/mouse-firework@0.1.1/dist/index.umd.js integrity=sha384-8LyaidD9GPxQQgLJO/WRw/O2h3BoNq/ApI/ecpvM6RsrCz2qP2ppBXUKihP4V/2d crossorigin=anonymous></script><script>if(window.firework){const e=JSON.parse('{"excludeelements":["a","button"],"particles":[{"colors":["var(--red-1)","var(--red-2)","var(--red-3)","var(--red-4)"],"duration":[1200,1800],"easing":"easeOutExpo","move":["emit"],"number":20,"shape":"circle","shapeOptions":{"alpha":[0.3,0.5],"radius":[16,32]}},{"colors":["var(--red-0)"],"duration":[1200,1800],"easing":"easeOutExpo","move":["diffuse"],"number":1,"shape":"circle","shapeOptions":{"alpha":[0.2,0.5],"lineWidth":6,"radius":20}}]}');e.excludeElements=e.excludeelements,delete e.excludeelements,window.firework(e)}</script><script>function initLive2d(){live2d.init("https://fastly.jsdelivr.net/gh/D-Sketon/plugin-live2d/",{themeTipsPath:""})}</script><script src=https://fastly.jsdelivr.net/gh/D-Sketon/plugin-live2d/js/live2d-autoload.js async onload=initLive2d()></script><div id=lazy-script><div><script data-pjax>window.REIMU_POST={author:"玛卡巴卡",title:"小智ESP32的后台程序本地化部署",url:"https://hui0882.github.io/post/study/%E5%B0%8F%E6%99%BAesp32-s3%E7%9A%84%E5%90%8E%E5%8F%B0%E9%83%A8%E7%BD%B2/",description:`本款小智的硬件是基于[虾哥开源](https://github.com/78/xiaozhi-esp32)的项目进行,在硬件和代码部分没有做过多的改动,都是基于源码,只是把小智的连接的后端服务器地址改成了自己的后台,这个部分也是用的[开源的后端工程](https://github.com/xinnan-tech/xiaozhi-esp32-server)
本教程**默认已安装git,conda**`,cover:"https://hui0882.github.io/images/background.webp"}</script><script src=/js/insert_highlight.js integrity crossorigin=anonymous data-pjax></script><script type=module data-pjax>
        const PhotoSwipeLightbox = (await safeImport("https:\/\/npm.webcache.cn\/photoswipe@5.4.4\/dist\/photoswipe-lightbox.esm.min.js", "sha384-DiL6M\/gG\u002bwmTxmCRZyD1zee6lIhawn5TGvED0FOh7fXcN9B0aZ9dexSF\/N6lrZi\/")).default;

        const pswp = () => {
          if (_$$('.article-entry a.article-gallery-item').length > 0) {
            new PhotoSwipeLightbox({
              gallery: '.article-entry',
              children: 'a.article-gallery-item',
              pswpModule: () => safeImport("https:\/\/npm.webcache.cn\/photoswipe@5.4.4\/dist\/photoswipe.esm.min.js", "sha384-WkkO3GCmgkC3VQWpaV8DqhKJqpzpF9JoByxDmnV8\u002boTJ7m3DfYEWX1fu1scuS4\u002bs")
            }).init();
          }
          if(_$$('.article-gallery a.article-gallery-item').length > 0) {
            new PhotoSwipeLightbox({
              gallery: '.article-gallery',
              children: 'a.article-gallery-item',
              pswpModule: () => safeImport("https:\/\/npm.webcache.cn\/photoswipe@5.4.4\/dist\/photoswipe.esm.min.js", "sha384-WkkO3GCmgkC3VQWpaV8DqhKJqpzpF9JoByxDmnV8\u002boTJ7m3DfYEWX1fu1scuS4\u002bs")
            }).init();
          }
          window.lightboxStatus = 'done';
          window.removeEventListener('lightbox:ready', pswp);
        }
        if(window.lightboxStatus === 'ready') {
          pswp()
        } else {
          window.addEventListener('lightbox:ready', pswp);
        }
      </script><script src=https://npm.webcache.cn/valine@1.5.1/dist/Valine.min.js data-pjax integrity=sha384-3ma91AExDeMAZ1rjTjaP8V2A2obQE+s5ltKRwYlwdpArz9xVbp0tF3b0VV2ACNPn crossorigin=anonymous></script><script data-pjax>var GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(e=>GUEST_INFO.indexOf(e)>-1),recordIP=JSON.parse("true"),highlight=JSON.parse("true"),visitor=JSON.parse("true");window.Valine&&new Valine({el:".vcomment",appId:"YoPgcLO1ePd5sVffWwuQF28W-gzGzoHsz",appKey:"GL6N2PKg0qI0jvODFWO6vYmw",placeholder:"Just go go",pageSize:"10",avatar:"mp",lang:"zh-cn",recordIP,highlight,visitor,requiredFields:guest_info,path:window.location.pathname})</script></div></div><script src=https://npm.webcache.cn/busuanzi@2.3.0/bsz.pure.mini.js async integrity=sha384-0M75wtSkhjIInv4coYlaJU83+OypaRCIq2SukQVQX04eGTCBXJDuWAbJet56id+S crossorigin=anonymous></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(e=>{for(let t of e)t.unregister()})</script><script>const reimuCopyright=String.raw`
   ______     ______     __     __    __     __  __    
  /\  == \   /\  ___\   /\ \   /\ "-./  \   /\ \/\ \   
  \ \  __<   \ \  __\   \ \ \  \ \ \-./\ \  \ \ \_\ \  
   \ \_\ \_\  \ \_____\  \ \_\  \ \_\ \ \_\  \ \_____\ 
    \/_/ /_/   \/_____/   \/_/   \/_/  \/_/   \/_____/ 
                                                    
  `;console.log(String.raw`%c ${reimuCopyright}`,"color: #ff5252;"),console.log("%c Theme.Reimu %c https://github.com/D-Sketon/hugo-theme-reimu ","color: white; background: #ff5252; padding:5px 0;","padding:4px;border:1px solid #ff5252;")</script></body></html>